<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luciene Oliveira - Terapia TRG</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
</head>
<body>

<header>
    <div class="container-flex">
        <div class="header-left">
            <span>Luciene Oliveira</span>
        </div>
    </div>
</header>

<section class="fade container">
    <h2>Escolha seu plano</h2>

    <div class="grid" style="margin-top:30px;">
        <div class="card" style="text-align:center;">
            <h3>Sessão Individual</h3>
            <p>55 minutos de atenção completa a você</p>
            <h2>R$ 120</h2>
            <button class="btn" onclick="irParaPagamento('individual')">Escolher</button>
        </div>

        <div class="card" style="text-align:center;">
            <h3>Pacote Mensal (4 sessões)</h3>
            <p>Acompanhamento contínuo e evolução</p>
            <h2>R$ 360</h2>
            <button class="btn" onclick="irParaPagamento('mensal')">Escolher</button>
        </div>
    </div>
</section>

<section class="fade container" id="pagamentoSection" style="display:none;">
    <h2>Pagamento PIX</h2>
    <div id="info"></div>

    <div style="margin-top:20px;">
        <label for="cupom">Digite seu cupom (opcional):</label><br>
        <input type="text" id="cupom" placeholder="Ex: LUCY10">
        <button class="btn" onclick="aplicarCupom()">Aplicar</button>
        <p id="mensagemCupom" style="color:green; margin-top:5px;"></p>
    </div>

    <h3>Valor a pagar: R$ <span id="valorFinal"></span></h3>

    <button class="btn" style="margin-top:20px;" onclick="gerarPagamento()">Gerar PIX</button>
    <div id="pixQR" style="margin-top:20px;"></div>
</section>

<section class="fade container" id="confirmadoSection" style="display:none;">
    <h2>Agendamento Confirmado!</h2>
    <p id="mensagemConfirmado"></p>
    <p>Em caso de dúvida, entre em contato:</p>
    <a class="btn" href="https://wa.me/5583987149132">WhatsApp da Luciene</a>
</section>

<script>
// ------------------- Fluxo -------------------
let planoSelecionado = "";
let valor = 0;
let descricao = "";

// Cupons permanentes
const cupons = { "LUCY10": 0.10, "TRG20": 0.20 };

// Cupons temporários
const cuponsTemporarios = {
    "PROMO5D": { desconto: 0.05, validade: "2025-12-15" },
    "BLACKFRIDAY": { desconto: 0.30, validade: "2025-12-10" }
};

function irParaPagamento(plano){
    planoSelecionado = plano;
    if(plano === "individual"){
        valor = 120;
        descricao = "Sessão Individual - Luciene";
    } else if(plano === "mensal"){
        valor = 360;
        descricao = "Pacote Mensal - Luciene";
    }

    document.getElementById("valorFinal").textContent = valor.toFixed(2);
    document.getElementById("info").innerHTML = `<p>Plano: <b>${descricao}</b></p>`;

    document.querySelector('section[id="pagamentoSection"]').style.display = "block";
    window.scrollTo(0,document.getElementById("pagamentoSection").offsetTop);
}

function aplicarCupom(){
    const codigo = document.getElementById("cupom").value.toUpperCase();
    const hoje = new Date().toISOString().split("T")[0];

    if(cupons[codigo]){
        valor = valor - valor * cupons[codigo];
        document.getElementById("valorFinal").textContent = valor.toFixed(2);
        document.getElementById("mensagemCupom").textContent = `Cupom permanente aplicado! ${(cupons[codigo]*100).toFixed(0)}% de desconto.`;
    } else if(cuponsTemporarios[codigo]){
        if(hoje <= cuponsTemporarios[codigo].validade){
            valor = valor - valor * cuponsTemporarios[codigo].desconto;
            document.getElementById("valorFinal").textContent = valor.toFixed(2);
            document.getElementById("mensagemCupom").textContent = `Cupom temporário aplicado! ${(cuponsTemporarios[codigo].desconto*100).toFixed(0)}% de desconto.`;
        } else {
            document.getElementById("mensagemCupom").textContent = "Cupom expirado!";
        }
    } else {
        document.getElementById("mensagemCupom").textContent = "Cupom inválido!";
    }
}

function gerarPagamento(){
    // Aqui você colocaria integração real do Mercado Pago
    document.getElementById("pixQR").innerHTML = `
        <p>PIX gerado para R$ ${valor.toFixed(2)} (exemplo)</p>
        <button class="btn" onclick="confirmarAgendamento()">Confirmar Pagamento</button>
    `;
}

function confirmarAgendamento(){
    document.querySelector('section[id="pagamentoSection"]').style.display = "none";
    document.querySelector('section[id="confirmadoSection"]').style.display = "block";

    let mensagem = "";
    if(planoSelecionado === "individual"){
        mensagem = "Você agendou a Sessão Individual de 55 minutos!";
    } else if(planoSelecionado === "mensal"){
        mensagem = "Você agendou o Pacote Mensal com 4 sessões!";
    }

    document.getElementById("mensagemConfirmado").textContent = mensagem;
}
</script>

</body>
</html>
